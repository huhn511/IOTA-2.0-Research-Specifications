<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.3">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Material+Icons">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.11/dist/katex.min.css" integrity="sha384-Um5gpz1odJg5Z4HAmzPtgZKdTBHZdw8S29IecapCSB31ligYPhHQZMIlWLYQGVoc" crossorigin="anonymous"><title data-react-helmet="true">4.5 Rate Control through Adaptive Proof of Work | IOTA-2.0-Research-Specifications</title><meta data-react-helmet="true" property="og:url" content="https://github.com/iotaledger/IOTA-2.0-Research-Specifications/IOTA-2.0-Research-Specifications/docs/4.5 Rate Control"><meta data-react-helmet="true" name="docusaurus_locale" content="en"><meta data-react-helmet="true" name="docusaurus_version" content="current"><meta data-react-helmet="true" name="docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="4.5 Rate Control through Adaptive Proof of Work | IOTA-2.0-Research-Specifications"><meta data-react-helmet="true" name="description" content="4.5.1 Introduction"><meta data-react-helmet="true" property="og:description" content="4.5.1 Introduction"><link data-react-helmet="true" rel="shortcut icon" href="/IOTA-2.0-Research-Specifications/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://github.com/iotaledger/IOTA-2.0-Research-Specifications/IOTA-2.0-Research-Specifications/docs/4.5 Rate Control"><link data-react-helmet="true" rel="alternate" href="https://github.com/iotaledger/IOTA-2.0-Research-Specifications/IOTA-2.0-Research-Specifications/docs/4.5 Rate Control" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://github.com/iotaledger/IOTA-2.0-Research-Specifications/IOTA-2.0-Research-Specifications/docs/4.5 Rate Control" hreflang="x-default"><link rel="stylesheet" href="/IOTA-2.0-Research-Specifications/assets/css/styles.e42a1e77.css">
<link rel="preload" href="/IOTA-2.0-Research-Specifications/assets/js/runtime~main.ba5c0dd1.js" as="script">
<link rel="preload" href="/IOTA-2.0-Research-Specifications/assets/js/main.38d3fb4b.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"dark")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/IOTA-2.0-Research-Specifications/"><img src="/IOTA-2.0-Research-Specifications/img/logo.svg" alt="IOTA-2.0-Research-Specifications" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/IOTA-2.0-Research-Specifications/img/logo.svg" alt="IOTA-2.0-Research-Specifications" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"></a><a class="navbar__item navbar__link navbar__link--active" href="/IOTA-2.0-Research-Specifications/docs/preface">Specification</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/iotaledger/IOTA-2.0-Research-Specifications" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--checked react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" checked="" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/IOTA-2.0-Research-Specifications/"><img src="/IOTA-2.0-Research-Specifications/img/logo.svg" alt="IOTA-2.0-Research-Specifications" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/IOTA-2.0-Research-Specifications/img/logo.svg" alt="IOTA-2.0-Research-Specifications" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link navbar__link--active" href="/IOTA-2.0-Research-Specifications/docs/preface">Specification</a></li><li class="menu__list-item"><a href="https://github.com/iotaledger/IOTA-2.0-Research-Specifications" target="_blank" rel="noopener noreferrer" class="menu__link"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu menu--responsive thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA" aria-label="Sidebar navigation"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/IOTA-2.0-Research-Specifications/docs/preface">Preface</a></li><li class="menu__list-item"><a class="menu__link" href="/IOTA-2.0-Research-Specifications/docs/1.1 Introduction">1.1 Introduction</a></li><li class="menu__list-item"><a class="menu__link" href="/IOTA-2.0-Research-Specifications/docs/2.2 Message Layout">2.2 Message Layout</a></li><li class="menu__list-item"><a class="menu__link" href="/IOTA-2.0-Research-Specifications/docs/2.3 Standard Payloads Layout">2.3 Standard Payloads Layout</a></li><li class="menu__list-item"><a class="menu__link" href="/IOTA-2.0-Research-Specifications/docs/2.4 Data Flow">2.4 Data flow</a></li><li class="menu__list-item"><a class="menu__link" href="/IOTA-2.0-Research-Specifications/docs/3.3 Peer Discovery">3.3 Peer Discovery</a></li><li class="menu__list-item"><a class="menu__link" href="/IOTA-2.0-Research-Specifications/docs/3.4 Neighbor Selection">3.4 Neighbor Selection</a></li><li class="menu__list-item"><a class="menu__link" href="/IOTA-2.0-Research-Specifications/docs/4.1 The Tangle">4.1 The Tangle</a></li><li class="menu__list-item"><a class="menu__link" href="/IOTA-2.0-Research-Specifications/docs/4.2 Timestamps">4.2 Timestamps</a></li><li class="menu__list-item"><a class="menu__link" href="/IOTA-2.0-Research-Specifications/docs/4.3 Tip Selection Algorithm">4.3 Tip Selection Algorithm</a></li><li class="menu__list-item"><a class="menu__link" href="/IOTA-2.0-Research-Specifications/docs/4.4 Solidification">4.4 Solidification</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" href="/IOTA-2.0-Research-Specifications/docs/4.5 Rate Control">4.5 Rate Control through Adaptive Proof of Work</a></li><li class="menu__list-item"><a class="menu__link" href="/IOTA-2.0-Research-Specifications/docs/4.6 Congestion Control">4.6 Congestion control</a></li><li class="menu__list-item"><a class="menu__link" href="/IOTA-2.0-Research-Specifications/docs/4.7 Markers">4.7 Markers</a></li><li class="menu__list-item"><a class="menu__link" href="/IOTA-2.0-Research-Specifications/docs/5.1 UTXO">5.1 UTXO</a></li><li class="menu__list-item"><a class="menu__link" href="/IOTA-2.0-Research-Specifications/docs/5.2 Ledger State">5.2 Ledger State</a></li><li class="menu__list-item"><a class="menu__link" href="/IOTA-2.0-Research-Specifications/docs/5.3 Mana">5.3 Mana</a></li><li class="menu__list-item"><a class="menu__link" href="/IOTA-2.0-Research-Specifications/docs/6.1 Objects of Consensus">6.1 Objects of Consensus</a></li><li class="menu__list-item"><a class="menu__link" href="/IOTA-2.0-Research-Specifications/docs/6.2 Opinion Setting">6.2 Opinion Setting</a></li><li class="menu__list-item"><a class="menu__link" href="/IOTA-2.0-Research-Specifications/docs/6.3 Fast Probabilistic Consensus">6.3 Fast Probabilistic Consensus</a></li><li class="menu__list-item"><a class="menu__link" href="/IOTA-2.0-Research-Specifications/docs/6.4 Finalization">6.4 Approval Weight and Finality</a></li><li class="menu__list-item"><a class="menu__link" href="/IOTA-2.0-Research-Specifications/docs/6.5 dRNG">6.5 Distributed Random Number Generator</a></li></ul></nav></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="markdown"><h1 id="45-rate-control-through-adaptive-proof-of-work">4.5 Rate Control through Adaptive Proof of Work</h1><h2 id="451-introduction">4.5.1 Introduction</h2><p>In Proof of Work-based blockchains, a built-in rate limit is enforced by the mining difficulty adjustment and the message fees. Without this filter, however, an attacker may be able to easily issue a very large number of messages to potentially harm the network. In order to enable the machine-to-machine economy, IOTA does not allow neither mining race nor fees, which makes an <em>explicit rate control mechanism necessary</em>. In order to ensure that the network traffic does not exceed the allowed throughput determined by the limited resources, it is fundamental to limit the number of messages issued at node level.</p><p>The mechanisms described act as an emergency break during spam attacks, by slowing down the rate of messages a node can issue.  For honest nodes, the proof of work difficulty should be small enough not to hamper performance.  Finer controls on the access are developed in [Section 4.6 - Congestion Control](./4.6 Congestion Control.md), which regulate network traffic during normal periods of congestion.</p><p>The Rate Control specification depends on the following specifications:</p><ul><li><p>[3.3 - Peer Discovery](./3.3 Peer Discovery.md)</p></li><li><p>[4.2 - Timestamps](./4.2 Timestamps.md)</p></li></ul><h3 id="4511-legacy-implementation">4.5.1.1 Legacy implementation</h3><p>In the legacy IOTA implementation, a user is asked to solve a proof of work (PoW) before issuing a new message. The user can either perform that computation locally or outsource it to a third-party service.</p><p>In the legacy network, the difficulty of the PoW is set to some value <code>POW_DIFFICULTY</code>. Received messages are stored in a queue and processed in FIFO order. The protocol dictates that the nodes forward messages if and only if the difficulty of the PoW performed is greater or equal to <code>POW_DIFFICULTY</code>. Otherwise, messages <em>shall</em> be dropped.</p><h3 id="4512-proposal">4.5.1.2 Proposal</h3><p>Similar to the legacy implementation, we require the solution of a given cryptographic puzzle before a message is issued. Here, however, we impose that the difficulty of the challenge progressively increases as a node issues multiple messages in a short time interval.</p><p>The goal of this document is to define this rate control mechanism, called <em>Adaptive PoW</em> (APoW), which permits nodes&#x27; theoretical throughput to be independent on their hardware equipment. We believe that this mechanism is fundamental to prevent spam and denial-of-service attacks, disallowing dishonest nodes from inflating their neighbors&#x27; buffers through large number of messages in a short time. Unlike APoW, the congestion control mechanism described in [Section 4.6 - Congestion Control](./4.6 Congestion Control.md) sets the actual throughput depending on nodes&#x27; access Mana, and protects the protocol against Sybil attacks and selfish behavior.</p><h2 id="452-adaptive-proof-of-work">4.5.2 Adaptive Proof of Work</h2><p>All nodes in the network have knowledge of the following three fixed global parameters:</p><ul><li><em>Base difficulty <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><msub><mi>d</mi><mn>0</mn></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(d_0)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span></span></em>. It sets the initial difficulty of PoW.</li><li><em>Adaptation rate <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>Î³</mi><mo>âˆˆ</mo><mo stretchy="false">[</mo><mn>0</mn><mo separator="true">,</mo><mn>1</mn><mo stretchy="false">]</mo><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(\gamma\in [0, 1])</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.05556em">Î³</span><span class="mspace" style="margin-right:0.2777777777777778em"></span><span class="mrel">âˆˆ</span><span class="mspace" style="margin-right:0.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mopen">[</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em"></span><span class="mord">1</span><span class="mclose">]</span><span class="mclose">)</span></span></span></span></span></em>. It provides the rate at which difficulty will be adjusted. Equivalently, <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>1</mn><mi mathvariant="normal">/</mi><mi>Î³</mi></mrow><annotation encoding="application/x-tex">1/\gamma</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord">1</span><span class="mord">/</span><span class="mord mathnormal" style="margin-right:0.05556em">Î³</span></span></span></span></span> indicates how many messages can be sent per time window without increasing the PoW difficulty.</li><li><em>APoW time window <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><mi>w</mi><mo>&gt;</mo><mn>0</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(w&gt;0)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.02691em">w</span><span class="mspace" style="margin-right:0.2777777777777778em"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord">0</span><span class="mclose">)</span></span></span></span></span></em>. It describes the width of the time interval considered by the algorithm, i.e., its granularity.</li></ul><h3 id="4521-message-generation">4.5.2.1 Message generation</h3><p>Let <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi></mrow><annotation encoding="application/x-tex">t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.61508em;vertical-align:0em"></span><span class="mord mathnormal">t</span></span></span></span></span> be the output of the function <code>CurrentTime()</code>. If node <code>m</code> wants to issue a new message, it <em>shall</em> perform a PoW with difficulty <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mi>m</mi></msub><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">d_m(t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span></span></span></span></span> such that</p><p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mi>m</mi></msub><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo><mo>=</mo><msub><mi>d</mi><mn>0</mn></msub><mo>+</mo><mrow><mo fence="true">âŒŠ</mo><mrow><mi>Î³</mi><mo>â‹…</mo><msub><mi>r</mi><mi>m</mi></msub><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo></mrow><mo fence="true">âŒ‹</mo></mrow></mrow><annotation encoding="application/x-tex">d_m(t) = d_0 + \left \lfloor{\gamma\cdot r_m(t)}\right \rfloor</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span><span class="mspace" style="margin-right:0.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="minner"><span class="mopen delimcenter" style="top:0em">âŒŠ</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05556em">Î³</span><span class="mspace" style="margin-right:0.2222222222222222em"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222222222222222em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span></span><span class="mclose delimcenter" style="top:0em">âŒ‹</span></span></span></span></span></span></p><p>where <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>r</mi><mi>m</mi></msub><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">r_m(t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span></span></span></span></span> represents the number of messages issued by node <em>m</em> with (message) timestamp in the interval <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mi>t</mi><mo>âˆ’</mo><mi>w</mi><mo separator="true">,</mo><mi>t</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[t-w, t]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mopen">[</span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2222222222222222em"></span><span class="mbin">âˆ’</span><span class="mspace" style="margin-right:0.2222222222222222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord mathnormal" style="margin-right:0.02691em">w</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em"></span><span class="mord mathnormal">t</span><span class="mclose">]</span></span></span></span></span>. Note that when <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î³</mi><mo>=</mo><mn>0</mn></mrow><annotation encoding="application/x-tex">\gamma = 0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em"></span><span class="mord mathnormal" style="margin-right:0.05556em">Î³</span><span class="mspace" style="margin-right:0.2777777777777778em"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em"></span><span class="mord">0</span></span></span></span></span>, the algorithm becomes equivalent to the legacy IOTA implementation.</p><h3 id="4522-message-verification">4.5.2.2 Message verification</h3><p>When a node <code>n</code> receives a message from a neighbor, it shall check that PoW with an appropriate difficulty was performed. The verification of the correctness of the PoW computation is the last step of the parser checks, right after signature verification (see [Section 2.4 - Data Flow](./2.4 Data flow.md)). Let us assume that node <code>n</code> receives a message with difficulty <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mi>m</mi></msub></mrow><annotation encoding="application/x-tex">d_m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span> issued by node <code>m</code>. To decide whether this message should be discarded, node <code>n</code> counts how many messages <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>r</mi><mi>m</mi></msub><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">r_m(t)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span></span></span></span></span> issued by <code>m</code> it has received in the last <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi></mrow><annotation encoding="application/x-tex">w</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em"></span><span class="mord mathnormal" style="margin-right:0.02691em">w</span></span></span></span></span> time units. In accordance with the formula above, the node validates the PoW only if the following condition is satisfied:</p><p><span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mi>m</mi></msub><mo>â‰¥</mo><msub><mi>d</mi><mn>0</mn></msub><mo>+</mo><mrow><mo fence="true">âŒŠ</mo><mrow><mi>Î³</mi><mo>â‹…</mo><msub><mi>r</mi><mi>m</mi></msub><mo stretchy="false">(</mo><mi>t</mi><mo stretchy="false">)</mo></mrow><mo fence="true">âŒ‹</mo></mrow><mi mathvariant="normal">.</mi></mrow><annotation encoding="application/x-tex">d_m \geq d_0 + \left\lfloor{\gamma\cdot r_m(t)}\right\rfloor.</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em"></span><span class="mrel">â‰¥</span><span class="mspace" style="margin-right:0.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="minner"><span class="mopen delimcenter" style="top:0em">âŒŠ</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.05556em">Î³</span><span class="mspace" style="margin-right:0.2222222222222222em"></span><span class="mbin">â‹…</span><span class="mspace" style="margin-right:0.2222222222222222em"></span><span class="mord"><span class="mord mathnormal" style="margin-right:0.02778em">r</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.151392em"><span style="top:-2.5500000000000003em;margin-left:-0.02778em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">m</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal">t</span><span class="mclose">)</span></span><span class="mclose delimcenter" style="top:0em">âŒ‹</span></span><span class="mspace" style="margin-right:0.16666666666666666em"></span><span class="mord">.</span></span></span></span></span></p><p>Discussions on the correctness of this procedure can be found on a <a href="https://iota.cafe/t/adaptive-pow-without-sequence-numbers/363">related article</a>.</p><h2 id="453-algorithm">4.5.3 Algorithm</h2><h3 id="4531-protocol-parameters">4.5.3.1 Protocol parameters</h3><p>In line with the previous section, all nodes know the constants shown by Table 4.5.1.</p><table><thead><tr><th>Parameter</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>POW_BASE</code></td><td>integer</td><td>The base difficulty <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>d</mi><mn>0</mn></msub></mrow><annotation encoding="application/x-tex">d_0</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.84444em;vertical-align:-0.15em"></span><span class="mord"><span class="mord mathnormal">d</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em"><span class="pstrut" style="height:2.7em"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">â€‹</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em"><span></span></span></span></span></span></span></span></span></span></span></td></tr><tr><td><code>APOW_RATE</code></td><td>float</td><td>The adaptation rate <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>Î³</mi></mrow><annotation encoding="application/x-tex">\gamma</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.625em;vertical-align:-0.19444em"></span><span class="mord mathnormal" style="margin-right:0.05556em">Î³</span></span></span></span></span> (proposed values [0.1 - 1])</td></tr><tr><td><code>APOW_WINDOW</code></td><td>integer</td><td>The APoW time window <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi></mrow><annotation encoding="application/x-tex">w</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em"></span><span class="mord mathnormal" style="margin-right:0.02691em">w</span></span></span></span></span> (proposed values [10 - 60s])</td></tr></tbody></table><p><strong>Table 4.5.1:</strong>  Global constants.</p><p>The choice of the time window is crucial in the correct functioning of the algorithm. Our claim is that the time window must be kept small for two main reasons:</p><ul><li>Message burst can be captured;</li><li>Implementation is easier as it requires smaller caches.</li></ul><p>However, it is fundamental to keep this time window at least larger than the gratuitous network delay <code>DLARGE</code> (see [Section 4.2 - Timestamps](./4.2 Timestamps.md)).</p><h3 id="4532-local-variables-and-metadata">4.5.3.2 Local variables and metadata</h3><p>Local variables and metadata are described in Table 4.5.2.</p><table><thead><tr><th>Variable/Metadata</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td><code>timestamp</code></td><td>integer</td><td>A value declared by the node representing time at which the message has been issued</td></tr><tr><td><code>nodeID</code></td><td>nodeID</td><td>Identity of the node issuing the message defined as the <code>blake2b</code> hash of its public key</td></tr><tr><td><code>targetDifficulty</code></td><td>integer</td><td>Minimum difficulty needed to pass the APoW verification</td></tr><tr><td><code>powCheck</code></td><td>boolean</td><td>Boolean value which indicates whether the APoW verification is successful or not</td></tr><tr><td><code>ownId</code></td><td>nodeID</td><td>Identity of the node running the algorithm</td></tr><tr><td><code>msgCache</code></td><td>list</td><td>Cache storing the timestamp of the most recent messages received by <code>ownID</code></td></tr><tr><td><code>nodeMap</code></td><td>list</td><td>List of nodeIDs which have issued messages recently (within 2 APoW timestamp windows)</td></tr></tbody></table><p><strong>Table 4.5.2:</strong> Local variables and metadata.</p><h3 id="4533-built-in-functions">4.5.3.3 Built-in functions</h3><p>Pseudocodes introduced in the next section will use the built-in functions described in Table 4.5.3.</p><table><thead><tr><th>Function</th><th>Description</th></tr></thead><tbody><tr><td><code>Floor(x)</code></td><td>Give the greatest integer less than or equal to <code>x</code></td></tr><tr><td><code>Sort(x, y)</code></td><td>Sort list <code>x</code> by metric <code>y</code></td></tr><tr><td><code>Append(x, y)</code></td><td>Add a new element <code>y</code> to list <code>x</code></td></tr><tr><td><code>Remove(x)</code></td><td>Remove the oldest element from the ordered data structure <code>x</code></td></tr><tr><td><code>Head(x)</code></td><td>Get (without removing) the oldest element from the ordered data structure <code>x</code></td></tr><tr><td><code>CurrentTime()</code></td><td>Current time computed with the local clock</td></tr></tbody></table><p><strong>Table 4.5.3:</strong> Built-in functions.</p><h3 id="4534-pseudocode">4.5.3.4 Pseudocode</h3><h4 id="targetpowtimestamp-nodeid"><code>TargetPoW(timestamp, nodeID)</code></h4><p>This function accesses the ledger to check the history of messages for <code>nodeId</code>.</p><pre><code class="language-vbnet">FUNCTION targetPoW = TargetPoW(timestamp, nodeID)
    # cache update (this is done as an optimization)
    WHILE CurrentTime() - Head(msgCache).timestamp &gt;  2 * APOW_WINDOW
        Remove(msgCache)
    Append(msgCache, &lt;nodeID, timestamp&gt;)
    Sort(msgCache, `timestamp`)
    countMsg = 0
    FOR msg IN msgCache[nodeID]
        IF msg &gt; timestamp - APOW_WINDOW AND msg &lt; timestamp
            countMsg++
    RETURN BASE_POW + Floor(APOW_RATE * countMsg)
</code></pre><h4 id="apowgeneration"><code>APoWGeneration()</code></h4><p>This function sets the difficulty at which the message creator should compute the PoW when generating a new message.</p><pre><code class="language-vbnet">### upon creation of a new message

FUNCTION targetPoW = APoWGeneration()
    RETURN TargetPoW(CurrentTime(), ownID)
</code></pre><h4 id="apowverificationmsg"><code>APoWVerification(msg)</code></h4><p>This function is triggered in the parser by new messages, see [Section 2.4 - Data Flow](./2.4 Data flow.md). It returns <code>TRUE</code> if the PoW attached to the message is sufficient, or <code>FALSE</code> otherwise.</p><pre><code class="language-vbnet">#### upon arrival of a message msg

FUNCTION powCheck = APoWVerification(msg)
    targetPoW = TargetPoW(msg.timestamp, msg.nodeID)
    IF msg.pow &gt;= targetPoW
        IF nodeMap[msg.nodeID] == NULL
            Append(nodeMap, msg.nodeID)
        Append(msgCache, msg.timestamp)
        RETURN TRUE
    ELSE
        RETURN FALSE
</code></pre><h3 id="4535-implementation">4.5.3.5 Implementation</h3><p>The most critical part of the algorithm concerns counting the number of messages recently issued by a node. Since querying the database may be expensive, we propose to cache the most recent messages. To this end, we use two data structures (see Image 4.5.4):</p><ul><li><code>nodeMap</code>. Each entry in the hashmap corresponds to a different nodeId and points to the doubly linked list of recent messages of the same node.</li><li><code>msgCache</code>. A queue which removes old messages and adds new ones according to a FIFO policy.</li></ul><p><img src="https://i.imgur.com/vgbhyJO.png"></p><p><strong>Image 4.5.4:</strong> Proposed data structures for the implementation of the rate control mechanism.</p><p>Both data structures point to the same locations of memory which store the timestamp of the message. These locations of memory also store the pointers to the other elements of <em>nodeMap</em> and <em>msgCache</em>.</p><p>The size of the cache <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>C</mi></mrow><annotation encoding="application/x-tex">C</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em"></span><span class="mord mathnormal" style="margin-right:0.07153em">C</span></span></span></span></span> (in number of timestamps) must be larger of the product between the maximum network throughput and the time window <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>w</mi></mrow><annotation encoding="application/x-tex">w</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em"></span><span class="mord mathnormal" style="margin-right:0.02691em">w</span></span></span></span></span>. Assume that max throughput is 1000 TPS and the time window is 50 s, cache size must be larger than 50,000. Given <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em"></span><span class="mord mathnormal" style="margin-right:0.10903em">N</span></span></span></span></span> the number of nodes issuing recent messages, our caching scheme provides the following performance:</p><ul><li>cache update: <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="script">O</mi><mo stretchy="false">(</mo><mn>1</mn><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\mathcal{O}(1)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord"><span class="mord mathcal" style="margin-right:0.02778em">O</span></span><span class="mopen">(</span><span class="mord">1</span><span class="mclose">)</span></span></span></span></span>;</li><li>msg counter: <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi mathvariant="script">O</mi><mo stretchy="false">(</mo><mi>C</mi><mi mathvariant="normal">/</mi><mi>N</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\mathcal{O}(C/N)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em"></span><span class="mord"><span class="mord mathcal" style="margin-right:0.02778em">O</span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.07153em">C</span><span class="mord">/</span><span class="mord mathnormal" style="margin-right:0.10903em">N</span><span class="mclose">)</span></span></span></span></span>;</li><li>cache size: <span class="math math-inline"><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>&lt;</mo><mn>10</mn></mrow><annotation encoding="application/x-tex">&lt;10</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.5782em;vertical-align:-0.0391em"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em"></span><span class="mord">1</span><span class="mord">0</span></span></span></span></span> MB.</li></ul><p>Assume that a node receives a message with PoW difficulty equal to <em>targetPoW</em>. However, the node cannot (immediately) know whether older messages have been issued before the timestamp of such message, which would make its PoW not sufficient. In this case, in order not to slow down the network, the node will forward anyway the message for scheduling.</p><p>An attacker may exploit the above in order to issue progressively older messages which would be accepted with easier PoW difficulty. Since the timestamp validation window is pretty large, this attack may theoretically be effective.</p><p>In case a node receives a new message with a timestamp that would make other messages from the same node would not have the correct PoW difficulty, the node will be blacklisted. However, no transactions which are already scheduled would be dropped.</p></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/iotaledger/IOTA-2.0-Research-Specifications/edit/master/website/docs/4.5 Rate Control.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_3DPF"></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/IOTA-2.0-Research-Specifications/docs/4.4 Solidification"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Â« 4.4 Solidification</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/IOTA-2.0-Research-Specifications/docs/4.6 Congestion Control"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">4.6 Congestion control Â»</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#451-introduction" class="table-of-contents__link">4.5.1 Introduction</a><ul><li><a href="#4511-legacy-implementation" class="table-of-contents__link">4.5.1.1 Legacy implementation</a></li><li><a href="#4512-proposal" class="table-of-contents__link">4.5.1.2 Proposal</a></li></ul></li><li><a href="#452-adaptive-proof-of-work" class="table-of-contents__link">4.5.2 Adaptive Proof of Work</a><ul><li><a href="#4521-message-generation" class="table-of-contents__link">4.5.2.1 Message generation</a></li><li><a href="#4522-message-verification" class="table-of-contents__link">4.5.2.2 Message verification</a></li></ul></li><li><a href="#453-algorithm" class="table-of-contents__link">4.5.3 Algorithm</a><ul><li><a href="#4531-protocol-parameters" class="table-of-contents__link">4.5.3.1 Protocol parameters</a></li><li><a href="#4532-local-variables-and-metadata" class="table-of-contents__link">4.5.3.2 Local variables and metadata</a></li><li><a href="#4533-built-in-functions" class="table-of-contents__link">4.5.3.3 Built-in functions</a></li><li><a href="#4534-pseudocode" class="table-of-contents__link">4.5.3.4 Pseudocode</a></li><li><a href="#4535-implementation" class="table-of-contents__link">4.5.3.5 Implementation</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Specification</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/IOTA-2.0-Research-Specifications/docs/preface">Specification</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://discord.iota.org" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://twitter.com/iota" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Twitter<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li><li class="footer__item"><a href="https://iota.stackexchange.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>Stack Exchange<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/iotaledger/IOTA-2.0-Research-Specifications" target="_blank" rel="noopener noreferrer" class="footer__link-item"><span>GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_3J9K"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></span></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 IOTA Foundation. Built with Docusaurus.</div></div></div></footer></div>
<script src="/IOTA-2.0-Research-Specifications/assets/js/runtime~main.ba5c0dd1.js"></script>
<script src="/IOTA-2.0-Research-Specifications/assets/js/main.38d3fb4b.js"></script>
</body>
</html>